<section>
	<h1>Filtering and Editing</h1>
	<p>This tutorial will introduce you to some techniques for filtering and editing a network in Cytoscape:</p>
    <ul>
        <li>Apply filters to remove low-confidence edges.</li>
        <li>Perform basic network edits.</li>
    </ul>
    
    <p>For this tutorial, we will use a published dataset, which represents a portion of a human interaction data set published by <a href="http://www.sciencedirect.com/science/article/pii/S0092867405008664">Stelzl et al.</a></p>
    <div class="cybrowser">
    <p>The tutorial is designed to run as a demo in the CyBrowser app, with interactive buttons for each task.</p>
    </div>

<aside class="notes" data-markdown>
Add speaker notes here...
</aside>
</section>

<section>
<div class="not-cybrowser">
<h1>Loading the session file</h1>
    <ul>
        <li>Launch Cytoscape and download the <a href="https://cytoscape.github.io/cytoscape-tutorials/protocols/data/STELZ.cys">demo session</a>.</li>
        <li>Open the demo session file <highlight>File&rarr;Open....</highlight>. The network should look like this:</li>
    </ul>
    <img plain src="modules/filtering-editing/stelz.png" style="width:70%"><br /><br />
</div>
    
<div class="cybrowser">
<h1>Loading the session file</h1>
    <ul>
        <li>Launch Cytoscape and load the demo session.</li>
        <input type="button" class="btn btn-primary" onclick="cybrowser.executeCyCommand('session open url=http://opentutorials.cgl.ucsf.edu/images/2/23/STELZL.cys');" value="Load session"/>
    </ul>
    <img plain src="modules/filtering-editing/stelzl.png" style="width:70%"><br /><br />
</div>

<aside class="notes" data-markdown>
Add speaker notes here...
</aside>
</section>

<!--Unecessary content


<section>
	<ul>
        <li>In the <b>Node Table</b> tab of the <b>Table Panel</b>, notice the attribute named <b>Official HUGO Symbol</b>, which should be visible by default. If it is not, click on the <b>Show Columns</b> <img plain src="modules/filtering-editing/Showcolumn.png"> button and select the attribute.</li>
        <li>Select some nodes on the Cytoscape canvas. You should now see their IDs (Entrez gene IDs, in this case), and their official HUGO gene names.</li>
    </ul>

<aside class="notes" data-markdown>
Add speaker notes here...
</aside>
</section>
-->

<section>
<div class="not-cybrowser">
<h1>Filtering the network</h1>
    <p>The interactions in your network have evidence from varying sources: high-confidence yeast two-hybrid interactions(LacZ4) and low-confidence yeast two-hybrid interactions(SD4), coAP and GST pull-down interactions (GST_PullDown), and supporting evidence of interaction reported in literature. Verify this by examining the edge types in the <b>Edge Table</b>. Let's use Cytoscape's filters to view only interactions from high-confidence yeast two-hybrid interactions(LacZ4) experiments.</p>
    <ul>
        <li>Click on the <b>Select</b> tab of the <b>Control Panel</b>.</li>
        <li>Click on the drop-down to the right and select <b>Create New Filter</b>. Enter a name for your filter, for example "high-confidence".</li>
        <li>Click the + (add) button and select <b>Column Filter</b>. In the <b>Choose column...</b> drop-down, select "Edge:interaction".</li>
        <li>In the second drop-down, select "is" and type "LacZ4" in the text box.</li>
    </ul>
</div>
<div class="cybrowser">
<h1>Filtering the network</h1>
    <p>The interactions in your network have evidence from varying sources: high-confidence yeast two-hybrid interactions(LacZ4) and low-confidence yeast two-hybrid interactions(SD4), coAP and GST pull-down interactions (GST_PullDown), and supporting evidence of interaction reported in literature. Verify this by examining the edge types in the <b>Edge Table</b>. Let's use Cytoscape's filters to view only interactions from high-confidence yeast two-hybrid interactions(LacZ4) experiments.</p>
    <ul>
        <li>Click on the <b>Select</b> tab of the <b>Control Panel</b>.</li>
        <li>Click on the drop-down to the right and select <b>Create New Filter</b>. Enter a name for your filter, for example "high-confidence".</li>
        <li>Click the + (add) button and select <b>Column Filter</b>. In the <b>Choose column...</b> drop-down, select "Edge:interaction".</li>
        <li>In the second drop-down, select "is" and type "LacZ4" in the text box.</li>
        <input type="button" class="btn btn-primary" onclick="cybrowser.executeCyCommand('network select edgeList=interaction:LacZ4');" value="Select LacZ4 interactions"/>
    </ul>
</div>
    
<aside class="notes" data-markdown>
Add speaker notes here...
</aside>
</section>

<section>
<p>The filter will be automatically applied by default. At the bottom of the Select tab, you can see how many edges/nodes where selected. A set of 2041 edges have been selected in your network. Your network should now look like this:</p>

    <img plain src="modules/filtering-editing/STELZL-high.png" style="width:60%"><br /><br />
		
    
<aside class="notes" data-markdown>
Add speaker notes here...
</aside>
</section>

<section>
<div class=not-cybrowser>
    
<ul>
    <li>At this point, only the relevant edges are selected. To also select the connected nodes, go to <highlight>Select&rarr;Nodes&rarr;Nodes connected by selected edges.</highlight></li>
    <li>Create a new network from the selection under <highlight>File&rarr;New&rarr;Network&rarr;From selected nodes, selected edges</highlight>.
    Your Cytoscape window should now appear as shown:</li>
</ul>
</div>
<div class="cybrowser">
<ul>
    <li>At this point, only the relevant edges are selected. To also select the connected nodes, go to <highlight>Select&rarr;Nodes&rarr;Nodes connected by selected edges.</highlight></li>
    <input type="button" class="btn btn-primary" onclick="cybrowser.executeCyCommand('network select firstNeighbors=any');" value="Select neighboring nodes"/>
    <li>Create a new network from the selection under <highlight>File&rarr;New&rarr;Network&rarr;From selected nodes, selected edges</highlight>.
    <input type="button" class="btn btn-primary" onclick="cybrowser.executeCyCommand('network create edgeList=selected nodeList=selected source=current');" value="Create new network"/>
    Your Cytoscape window should now appear as shown:</li>
</ul>
</div>
<img plain src="modules/filtering-editing/STELZL-new.png" style="width:60%"><br /><br />
    
<aside class="notes" data-markdown>
Add speaker notes here...
</aside>
</section>

<section>
    <p>Compared to the network you started with, the new network has fewer edges, but all the edges are determined through by higher-confidence experimentation. For some types of analysis, this is a more appropriate set of edges.</p>

<aside class="notes" data-markdown>
Add speaker notes here...
</aside>
</section>

<section>
<h1>Choosing nodes based on adjacent nodes</h1>
    <p>It's often important to select a node based on properties of the nodes it connects to, not based on the properties of the node or an edge itself. For the sake of illustration, the STELZL data has a column tagging a node as "suspicious", as judged from analysis outside of Cytoscape. In this tutorial, we show how to identify "non-suspicious" genes connected to at least three "suspicious" nodes:</p>
    <ul>
        <li>Select all non-suspicious nodes and any nodes they connect to.</li>
        <li>Remove any suspicious nodes that connect to less than 3 non-suspicious nodes.</li>
    </ul>
<aside class="notes" data-markdown>
Add speaker notes here...
</aside>
</section>

<section>
    <h2>Select non-suspicious nodes and their neighbors</h2>
    <ul>
        <li>Go back to the original (unfiltered) network.</li>
        <li>In the <b>Select</b> tab of the <b>Control Panel</b>, click on the drop-down to the right and select <b>Create New Filter</b>. Enter a name for your filter, for example, "non-suspicious nodes and neighbors".</li>
        <li>Click the + (add) button and select <b>Column Filter</b>. In the <b>Choose column...</b> drop-down, select "Node:Suspicous".</li>
        <li>In the second drop-down, select "false".</li>
        <li>Select neighboring nodes by choosing <b>Select&rarr;Nodes&rarr;First Neighbors of Selectes Nodes&rarr;Undirected</b>.</li>
        <li>Create a new network consisting of non-suspicious nodes and their neighbors by selecting <b>File&rarr;New&rarr;From selected nodes, all edges</b>.</li>
    </ul>
<aside class="notes" data-markdown>
Add speaker notes here...
</aside>
</section>

<section>
    <h2>Remove sparsley connected suspicious nodes</h2>
    <p>We now have a network that includes both types of nodes. We will now create a new filter to remove all suspicious nodes that connect to fewer than three non-suspicious nodes:</p>
    <ul>
        <li>In the <b>Select</b> tab, create a new filter and name it "Eliminate sparse suspicious nodes".</li>
        <li>Add a <b>Column Filter</b> for "Node:Suspicious" and choose "true".</li>
        <li>Add a <b>Degree Filter</b>. Set the range to between 0 and 2.</li>
        <li>To remove the selected nodes, select <b>Edit&rarr;Delete Selected Nodes and Edges...</b>.</li>
        <li>Finally, we need to remove any unconnected nodes that remain after the filters. Setup a Degree filter with a starting range of 1. This selects all nodes that are connected to at least one other node.</li>
        <li>Create a new network of the selected nodes by choosing <b>File&rarr;New&rarr;From selected nodes, all edges</b>.</li>
    </ul>
<aside class="notes" data-markdown>
Add speaker notes here...
</aside>
</section>

<section>
    <p>The new network has only non-suspicious nodes and suspicious nodes that connect to three or more non-suspicious nodes, and the non-suspicious nodes are highlighted:</p>

    <!--<img plain src="modules/filtering-editing/STELZL-final.png" style="width:70%"><br /><br />-->
<aside class="notes" data-markdown>
Add speaker notes here...
</aside>
</section>

<section>
    
    <p>Other tutorials deal with layouts and visual style, but as an example, the figure below shows suspicious nodes in red and non-suspicious nodes in blue -- note that each non-suspicious node connects to a minimum of 3 suspicious nodes and no other non-suspicious nodes, per our filters. (Hint: You can get the layout below by using the <b>Layout → yFiles Organic Layout</b>.)</p>

        <!--<img plain src="modules/filtering-editing/STELZL-styled.png" style="width:70%"><br /><br />-->
<aside class="notes" data-markdown>
Add speaker notes here...
</aside>
</section>

<section>
    <h1>Editing</h1>
    <p>At times, it can be very useful to modify a network slightly: to add or remove nodes or edges. For instance, if you have prior knowledge of some biological process, you might want to add some nodes for proteins that you know are involved in the process, but that don't appear in your data set. <br />All network editing functions are available in a right-click context menu in the Network View Window.</p>
    <ul>
        <li>To add a node, right-click anywhere in the <b>Network View Window</b> and select <b>Add → Node</b>.</li>
        <li>Select the node with your mouse. In the <b>Node Table</b>, you should see a node with the shared name Node 1.</li>
        <li>Give your new node a name by clicking on the entry in the <b>Node Table</b>, and entering a name under the column <b>Official HUGO Symbol</b>.</li>
        <li>To add an edge to the node, right-click on the node and choose <b>Edit → Add Edge</b>. Drag the end of the newly created edge to another node in the network, and click to attach it.</li>
    </ul>
        <p>It is also possible to add nodes and interactions in a sif format.</p>
    <ul>
        <li>Locate the CPNE6 gene using the <b>Search</b> interface. Note the gene ID, 9362.</li>
        <li>We are going to add a known interaction between CPNE6 and GRB7 (Entrez ID 2886). With the CPNE6 gene in focus (not selected), right-click anywhere in the <b>Network View Window</b> and select <b>Add → Edge (and possibly Nodes) using SIF....</b></li>
        <li>In the <b>SIF Interpreter</b> dialog, enter "2886 interacts 9362" and click <b>OK</b>. You should see the new node with id 2886 connected to CPNE6.</li>
    </ul>
<aside class="notes" data-markdown>
Add speaker notes here...
</aside>
</section>



<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Basic Data Visualization</title>

		<link rel="stylesheet" href="../../css/reveal.css">
		<link rel="stylesheet" href="../../css/theme/cytoscape-protocol-1.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="../../lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? '../../css/print/pdf.css' : '../../css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
                
<!-- ========================================================== -->
<!-- THIS IS WHERE YOUR CONTENT BEGINS -->
<section>
    <h1>Basic Data Visualization</h1>
    <p><highlight>Cytoscape is an open source software platform for integrating, visualizing, and analyzing measurement data in the context of networks.</highlight></p>

    <p>This tutorial presents a scenario of how expression and network data can be combined to tell a biological story and includes these concepts:</p>
        <ul>
            <li>Visualizing networks using expression data.</li>
            <li>Filtering networks based on expression data.</li>
            <li>Assessing expression data in the context of a biological network.</li>
        </ul>
<div class="footer" style="position: absolute; left: -3em; bottom: -4em; ">
<img class="plain" src="../../assets/images/Cytoscape.png" style="height:70px;opacity:0.5"> 
<version>3.8.0</version></div>
</section>

<section>
	<h1>Loading Network</h1>
    			<ul>
				<div style="width:40%;float:right; margin-left: 10px">
					<img class="plain" src="BasicDataVizDemoLoaded.png">
				</div>
        <li>To get started, install and launch the latest version of <a href="http://www.cytoscape.org/" target="_blank">Cytoscape</a>.</li>
		<li>We will use NDEx to find a relevant network. In the Network Search interface in the Control Panel, select NDeX from the drop-down, and type in "GAL1 GAL4 GAL80".</li>
		<li>In the search results, find the <b>galFiltered network</b>. Click the <highlight>Import network to Cytoscape</highlight> icon to the left of the network name.</li>
		<li>The network will open with the default style, similar to the network on the right:</li>
		</ul>
    
<p>To learn more about <b>importing networks from local files</b>, see the <a href="https://cytoscape.github.io/cytoscape-tutorials/protocols/loading-networks/#/0/13" target="_blank">Loading Networks Tutorial</a>.</p>

		<aside class="notes" data-markdown>
		Add speaker notes here...
		</aside>
	</section>


	<section>
		<h1>Visualizing Expression Data on Networks</h1>
		<p>Probably the most common use of expression data in Cytoscape is to set the <b>visual properties</b> of the nodes (color, shape, border) in a network according to expression data. This creates a powerful visualization, portraying functional relation and experimental response at the same time. Here, we will show an example of doing this.</p>
		<p>The data used in this example is from yeast, and represents an experiment of perturbations of the genes <b>Gal1</b>, <b>Gal4</b>, and <b>Gal80</b>, which are all yeast transcription factors.
            
		<aside class="notes" data-markdown>
Add speaker notes here...
		</aside>
	</section>

    
	<section>
        <p>For this tutorial, the experimental data was part of the Cytoscape session file you loaded earlier, and is visible in the Node Table:</p><br />
		<ul>
			<img plain src="Galbrowse3.png" style="width:80%"><br /><br />
            <li>You can select nodes in the network by <highlight>Shift + Click and Drag</highlight> or by <highlight>Shift + clicking on multiple nodes</highlight>.</li>
			<li>Selecting one or more nodes in the network will update the Node Table to show only the corresponding row(s).</li>
            
		</ul>
    <br />
		<p>To learn more about <b>importing data</b>, see the <a href="https://cytoscape.github.io/cytoscape-tutorials/protocols/importing-data-from-tables/#/" target="_blank">Importing Data From Tables</a>.</p>

		<aside class="notes" data-markdown>
		Add speaker notes here...
		</aside>
	</section>

    <section>
		<p>We can now use the data to manipulate the visual properties of the network by mapping specific data columns to visual style properties:</p>
		<ul>
			<li>The <b>gal80Rexp</b> expression values will be mapped to node color; nodes with low expression will be colored blue, nodes with high expression will be colored red.</li>
			<li>Significance for expression values will be mapped to Node Border Width, so nodes with significant changes will appear with a thicker border.</li>
		</ul>
	</section>

        <section>
	<h1>Set Node Fill Color</h1>
    <ul>
    <li>Click on the <highlight>Style</highlight> tab in the <highlight>Control Panel</highlight>.</li>
    <li>Find <highlight>Fill Color</highlight> in the list of properties and expand it to view the mapping options.</li>
	<li>Click the <highlight>-- select value --</highlight> cell in the <highlight>Column</highlight> section, and select <b>gal80Rexp</b> in the drop-down.</li>
	<li>Click the <highlight>-- select value--</highlight> cell in the <highlight>Mapping Type</highlight> section, and select <highlight>Continuous Mapping</highlight> in the drop-down.</li>
    <li>This produces an initial gradient ranging from blue to red for expression values. Notice that the nodes in the network change color. For our purposes, this default gradient works so we don't need to edit it.</li>
    </ul><br /><br />
        <img src="NodeFillMapping.png" style="width:40%">
   <br />         
        <p>To learn more about <b>changing node color</b>, see the <a href="https://cytoscape.github.io/cytoscape-tutorials/protocols/mapping-data/#/0/3" target="_blank">Visualizing Expression Data Tutorial</a>.</p>
            
        <aside class="notes" data-markdown>
            Add speaker notes here...
        </aside>
    </section>

     <section>
	<h1>Set Default Node Color</h1>
	<p>Some nodes in the network don't have any data, and for those nodes, the default color applies. In our case, the default color is blue, which falls within the spectrum of our blue-red gradient. This is not ideal for data visualization, so a useful trick is to choose a color outside the gradient spectrum to distinguish nodes with no defined expression value.</p>
    <ul>
    <li>Still in the <highlight>Style</highlight> tab, under <highlight>Fill Color</highlight>, click the <highlight>Def.</highlight> (leftmost) square next to <highlight>Fill Color</highlight> and choose a dark gray color.</li>
    </ul>
         <img src="NodeFillDefaultMapping.png" style="width:40%">
         <aside class="notes" data-markdown>
             Add speaker notes here...
         </aside>
    </section>

    <section>
    <h1>Set Node Border Width</h1>
        <ul>
            <li>Click on the middle square (<highlight>Map.</highlight>) next to the <highlight>Border Width</highlight> row in the <highlight>Style</highlight> panel.</li>
            <li>Click the <highlight>-- select value --</highlight> cell in the <highlight>Column</highlight> section, and select <b>gal80Rsig</b> in the drop-down.</li>
            <li>Click the <highlight>-- select value--</highlight> cell in the <highlight>Mapping Type</highlight> section, and select <highlight>Continuous Mapping</highlight> in the drop-down.</li>
            <li>Double-click on the gradient, which defines the node border width over the range of p values.</li>
        </ul><br /><br />
        <img src="NodeBorderGradient.png" style="width:30%"><br /><br />
        <ul>
            <li>First, we will define the min/max of the range of p values we are interested in, that is anything under 0.05. Click on <highlight>Set Min and Max...</highlight> and set the max to <b>0.05</b>. Click <highlight>OK</highlight> to save.</li>
            <li>Click on the handle for the max value (black triangle on the right-most end of the gradient) and set the value to <b>10</b> in the <highlight>Node Border Width</highlight> field. </li>
        </ul>
        <br /><br />
        <p>To learn more about <b>visualizing data</b>, see the <a href="https://cytoscape.github.io/cytoscape-tutorials/protocols/mapping-data/#/" target="_blank">Visualizing Expression Data Tutorial</a>.</p>
    </section>
                
    <section>
        <h1>Creating a Legend</h1>
        <p>The Cytoscape app Legend Creator allows you to create a customized legend for your visualization. You can install Legend Creator from the <a href="http://apps.cytoscape.org/apps/legendcreator">App Store</a> or via the <highlight>Cytoscape App Manager</highlight>.</p>
        <ul>
            <li>In the <highlight>Control Panel</highlight>, go to the <highlight>Legend Panel</highlight>. This is the interface for the Legend Creator app, and will list multiple options for creating a legend.</li>
            <li>For our purposes, the default settings are satisfactory. Click <highlight>Add Legend</highlight> to continue. The legend will appear in the lower left of the network view.</li>
        </ul>
        <img class="border" src="LegendPanel.png" style="width:40%">
</section>

            
    <section>
        <ul>
            <li>To move the legend, first click the <highlight>Toggle Annotation Selection</highlight> icon <img class="border" src="AnnotationSelection.png"> at the bottom of the <highlight>Network View Window</highlight>. You can now select the legend like you would any object, for example by click and drag.</li><br /><br />
        </ul>
        <img class="plain" src="NetworkLegend.png" style="width:60%">
        <p>To learn more about <b>creating legends</b>, see the <a href="https://cytoscape.github.io/cytoscape-tutorials/protocols/legend-creator/#/" target="_blank">Legend Creator</a>.</p>
                
    </section>
                

	<section>
    <h1>Layouts</h1>
        <p>An important aspect of network visualization is the layout, meaning the positioning of nodes and edges. Our network had a preset layout in the original file you imported, but this can be changed.</p>
        <ul>
                <li>Let's change the layout to <b>Degree Sorted Circle Layout</b> by selecting <highlight>Layout &rarr; Degree Sorted Circle Layout</highlight>. In this layout, nodes are sorted by degree (connectedness), with the highest degree node at the 6 o'clock position, and remaining nodes are sorted counter clock-wise based on decreasing degree.</li>
        </ul>
        <p>For this network, a degree-sorted circle layout may not be the most effective. Instead, let's try a force-directed layout instead, which may work better with this network.</p>
        <ul>
                <li>An easy way to apply the <b>Prefuse Force-directed Layout</b> is by clicking the <highlight>Preferred Layout</highlight> <img class="border" src="PreferredLayoutButton.png"> in the toolbar. The preferred layout algorithm can be changed under <highlight>Layout &rarr; Settings...</highlight>.</li> 
        </ul>
        
		<p>Cytoscape supports many different layout algorithms, described in detail in the 
		<a href="http://manual.cytoscape.org/en/stable/Navigation_and_Layout.html?highlight=layout#automatic-layout-algorithms" target="_blank">Cytoscape manual</a>. </p>

		<aside class="notes" data-markdown>
		Add speaker notes here...
		</aside>
	</section>

	<section>
		<h1>Select Nodes</h1>
        <p>Cytoscape allows you to easily filter and select nodes and edges based on data attributes. Next, we will select a subset of nodes with high expression in the gal80 knockout:</p>
				<ul>
					<li>Go to the <highlight>Select</highlight> tab in the Cytoscape Control Panel (the leftmost panel).</li>
					<li>Click on the <highlight>+</highlight> button and select <highlight>Column Filter</highlight>.</li>
					<li>Under <highlight>Choose column...</highlight>, select <highlight>Node: gal80Rexp</highlight>. Notice how all the nodes in the network are selected at first.</li>
					<li>Using the slider or the input fields, specify values of <b>2</b> or higher by changing the minimum value to 2.</li>
				</ul>
			<p>You should now see only a few nodes in the network selected (highlighted yellow).</p>
        <br />
        <p>To learn more about <b>filtering and selection</b>, see the <a href="https://cytoscape.github.io/cytoscape-tutorials/protocols/filtering-by-selection/#/" target="_blank">Filtering by Selection Tutorial</a>.</p>
        
		<aside class="notes" data-markdown>
		Add speaker notes here...
		</aside>
	</section>

	<section>	
        <h1>Expand Selection and Create New Network</h1>
        <p>We have now selected only the few top expressing nodes. To see the context of these nodes in the larger network, we can expand the selection of nodes to include the nodes connecting to the selected nodes, i.e. the first neighbors. Once we have that larger selection, we can create a new network.</p>
        <ul>
            <li>Select the first neighbors of selected nodes by clicking the <highlight>First Neighbors of Selected Nodes &rarr; Undirected</highlight> button <img src="FirstNeighborsButton.png"> in the toolbar.</li>
            <li>Create a new network from the current selection by clicking the <highlight>New Network From Selection, All edges</highlight> button <img src="NewNetworkFromSelectionButton.png"> in the toolbar.</li>
            <li>Click on the <highlight>Preferred Layout</highlight> button <img src="PreferredLayoutButton.png"> in the toolbar to apply a force-directed layout.</li> 
                
        </ul>

		<aside class="notes" data-markdown>
		Add speaker notes here...
		</aside>
	</section>

<section>
    <p>Your new network will look similar to this:</p>
    <img class="plain" src="FinalNetwork.png" style="width:45%">
</section>

<section>
	<h3>Exploring Nodes</h3>
	<ul>
		<li>Right-click on any node (for example GAL4).</li>
		<li>Select the menu <highlight>External Links &rarr; Sequences and Proteins → Ensembl Gene View → yeast</highlight>.</li>
		<li>This will launch a browser window and search the Ensembl database for the term <b>YPL248C</b>, the name of the node.</li>
	</ul>
	<aside class="notes" data-markdown>
	Add speaker notes here...
	</aside>
</section>

<section>
	<p>Digging into the biology of this network, it turns out that GAL4 is repressed by GAL80. Both nodes (GAL4 and GAL11) show fairly small changes in expression, and neither change is statistically significant: they are pale blue with thin borders. These slight changes in expression suggest that the critical change affecting the red nodes might be somewhere else in the network, and not either of these nodes.
	GAL4 interacts with GAL80, which shows a significant level of repression: it is medium blue with a thicker border.
	<p>Note that while GAL80 shows evidence of significant repression, most nodes interacting with GAL4 show significant levels of induction: they are rendered as red rectangles.
	GAL11 is a general transcription co-factor with many interactions.</p>
	<p>Putting all of this together, we see that the <b><i>transcriptional activation activity of Gal4 is repressed by Gal80</i></b>. So, repression of Gal80 increases the transcriptional activation activity of Gal4. Even though the expression of Gal4 itself did not change much, <b><i>the Gal4 transcripts were much more likely to be active transcription factors when Gal80 was repressed</i></b>. This explains why there is so much up-regulation in the vicinity of Gal4.</p>
</section>

<section>
    <h3>Summary</h3>
    <p>In summary, we have: </p>
        <ul>
        <li>Explored a yeast interactome from a transcription factor knockout experiment</li>
        <li>Created a visual style using expression value as node color and with border width mapped to significance</li>
        <li>Selected high expressing genes and their neighbors and created a new network</li>
        </ul>
    <p>Finally, we can now export this network as a publication-quality image....</p>
	<aside class="notes" data-markdown>
	Add speaker notes here...
	</aside>
</section>

<section>
	<h1>Saving Results</h1>
    <p>Cytoscape provides a number of ways to save results and visualizations:</p>
	<ul>
					<li>As a session: <highlight>File &rarr; Save</highlight>, <highlight>File &rarr; Save As...</highlight></li>
					<li>As an image: <highlight>File &rarr; Export &rarr; Network to Image...</highlight></li>
					<li>To the web: <highlight>File &rarr; Export &rarr; Network to Web Page...</highlight> (<a href="../saving-results/web_session/index.html" target="_blank">Example</a>)</li>
        <li>To a public repository: <highlight>File &rarr; Export &rarr; Network to NDEx</highlight>, or <highlight>File &rarr; Export &rarr; Collection to NDEx</highlight></li>
		<li>As a graph format file: <highlight>File &rarr; Export &rarr; Network to File</highlight>. <br/>Formats:
						<ul>
										<li>CX JSON</li>
										<li>Cytoscape.js JSON</li>
										<li>GraphML</li>
										<li>PSI-MI</li>
										<li>XGMML</li>
										<li>SIF</li>
                        </ul></li>
	</ul>
</section>
                
<!-- THIS IS WHERE YOUR CONTENT ENDS -->
<!-- ========================================================== -->

			</div>
		</div>

		<script src="../../lib/js/head.min.js"></script>
		<script src="../../js/reveal.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-155159-15', 'auto');
  ga('send', 'pageview');

</script>
<script>
	Reveal.addEventListener( 'ready', function() {
	if(!window.navigator.userAgent.includes('CyBrowser')){
		var divs = document.getElementsByClassName("cybrowser")
		for (var i=0;i<divs.length;i++){
			divs[i].style.display = "none";
		}
	} else {
		var divs = document.getElementsByClassName("not-cybrowser")
		for (var i=0;i<divs.length;i++){
			divs[i].style.display = "none";
		}
	}
});
</script>  
		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,
				controls: true,
				progress: true,
				slideNumber: false,
				touch: true,
				fragments: true,
				help: true,
				showNotes: false,
				previewLinks: false,
				transition: 'slide', // none/fade/slide/convex/concave/zoom
				width: 1200,
				height: 860,
				autoSlide: 0,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
				{ src: '../../plugin/markdown/marked.js' },
				{ src: '../../plugin/markdown/markdown.js' },
				{ src: '../../plugin/markdown/zoom.js', async: true, condition: function(){ return !!document.body.classList; } },
				{ src: '../../plugin/zoom-js/zoom.js', async: true, condition: function(){ return !!document.body.classList; } },
				{ src: '../../plugin/notes/notes.js', async: true },
				{ src: '../../plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
				{ src: '../../plugin/external/external.js', condition: function() { return !!document.querySelector( '[data-external]' ); } }
				]
				});
			</script>
		</body>
	</html>
